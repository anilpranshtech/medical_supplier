{% extends "pages/base.html" %}
{% load static %}
{% load custom_filters %}

{% block content %}
<title>Medical Supplies</title>
<style>
    #loginRequiredModal, #rfqModal, #imageModal, #eventRegistrationModal, #questionModal {
        z-index: 9999;
        backdrop-filter: blur(8px);
        background-color: rgba(0, 0, 0, 0.4);
    }

    /* Slider Styles */
    .kt-slider-container {
        width: 100%;
        max-width: 1600px;
        height: 265px;
        overflow: hidden;
        position: relative;
        background: white;
        margin-left: auto;
        margin-right: auto;
        margin-top: 1.75rem;
    }

    .kt-slider {
        display: flex;
        transition: transform 0.5s ease-in-out;
        height: 100%;
    }
    .kt-slide {
    flex: 0 0 100%;
    width: 100%;
    height: 100%;
    display: block;
    }
    .kt-slide img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        aspect-ratio: 320 / 53;
    }

    .kt-nav-btn {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        background: rgba(229, 231, 235, 0.8);
        padding: 0.5rem;
        border-radius: 9999px;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        font-size: 1.5rem;
        line-height: 1;
        color: black;
        cursor: pointer;
        transition: background-color 0.2s;
    }

    .kt-nav-btn:hover {
        background-color: var(--primary-color, #007bff);
        color: white;
    }

    .kt-nav-btn-left {
        left: 12px;
    }

    .kt-nav-btn-right {
        right: 12px;
    }
.kt-dots {
    text-align: center;
    margin-top: 10px;
    position: absolute;
    bottom: 15px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 8px;
}

.kt-dot {
    height: 12px;
    width: 12px;
    background-color: #333;
    border-radius: 50%;
    display: inline-block;
    cursor: pointer;
    transition: background-color 0.3s ease;
}

.kt-dot.active {
    background-color: #bbb;
    transform: scale(1.2);
}
    /* Grid styles */
    .grid-cols-custom {
        display: grid;
        grid-template-columns: repeat(4, minmax(0, 1fr));
        gap: 1.5rem;
    }

    @media (min-width: 1536px) {
        .grid-cols-custom {
            grid-template-columns: repeat(5, minmax(0, 1fr));
        }
    }

    @media (max-width: 1024px) {
        .grid-cols-custom {
            grid-template-columns: repeat(3, minmax(0, 1fr));
        }
    }

    @media (max-width: 768px) {
        .grid-cols-custom {
            grid-template-columns: repeat(2, minmax(0, 1fr));
        }
    }

    @media (max-width: 480px) {
        .grid-cols-custom {
            grid-template-columns: 1fr;
        }
    }

    .card {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        position: relative;
        overflow: hidden;
    }

    .card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0,0,0,0.1);
    }
     /* Out of Stock Styles */
     .out-of-stock-overlay {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(255, 255, 255, 0.85);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 2;
    }
    
    .out-of-stock-badge {
        background: #dc2626;
        color: white;
        padding: 8px 16px;
        border-radius: 6px;
        font-weight: 600;
        font-size: 0.875rem;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
    }
        /* Animation for CENTER column - Scrolls UP */
        @keyframes scrollUp {
        0% {
            transform: translateY(0);
        }
        100% {
            transform: translateY(calc(-100% + 500px));
        }
    }
    
    /* Animation for SIDE columns - Scrolls DOWN */
    @keyframes scrollDown {
        0% {
            transform: translateY(calc(-100% + 500px));
        }
        100% {
            transform: translateY(0);
        }
    }
    .scroll-content-left, .scroll-content-right {
        transform: translateY(calc(-100% + 500px));
    }
    .scroll-column:hover .scroll-content-left,
    .scroll-column:hover .scroll-content-center,
    .scroll-column:hover .scroll-content-right {
        animation-play-state: paused;
    }
    .scroll-paused {
        animation-play-state: paused !important;
    }
    .testimonial-scroll-card {
        background: white;
        border-radius: 12px;
        padding: 1.5rem;
        margin-bottom: 1.5rem;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
        transition: transform 0.3s ease;
    }
    
    .testimonial-scroll-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    }
    @media (max-width: 1024px) {
        .section-container > div:first-child {
            grid-template-columns: 1fr;
            height: 600px;
            gap: 1rem;
        }
        
        .scroll-column {
            height: 200px;
        }
        
        @keyframes scrollUp {
            0% {
                transform: translateY(0);
            }
            100% {
                transform: translateY(calc(-100% + 200px));
            }
        }
        
        @keyframes scrollDown {
            0% {
                transform: translateY(calc(-100% + 200px));
            }
            100% {
                transform: translateY(0);
            }
        }
        
        .scroll-content-left, .scroll-content-right {
            transform: translateY(calc(-100% + 200px));
        }
    }
    
    .category-main-container {
    max-width: var(--custom-container-width, 99%);
    margin: 20px auto 10px auto;
    background: #ffffff;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08);
    padding: 8px 20px;
    position: relative;
}
.categories-row {
    display: flex;
    gap: 24px;
    align-items: center;
    justify-content: center; 
}
/* ICON */
.category-icon {
    width: 70px;
    height: 70px;
    margin: auto;
    display: flex;
    align-items: center;
    justify-content: center;
}
.category-name {
    font-size: 13px;
    font-weight: 500;
    margin-top: 6px;
    white-space: nowrap;
    color: #212121;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 3px;
}
.category-name.active {
    color: #2874f0;
}
.dropdown-arrow {
    width: 0;
    height: 0;
    border-left: 3px solid transparent;
    border-right: 3px solid transparent;
    border-top: 3px solid #212121;
    transition: transform 0.3s;
}

.category-name.active .dropdown-arrow {
    transform: rotate(180deg);
    border-top-color: #2874f0;
}
.mega-dropdown {
    display: none;
    position: absolute;
    background: #ffffff;
    box-shadow: 0 4px 16px rgba(0,0,0,0.12);
    z-index: 1000;
    border-radius: 4px;
}

.mega-dropdown.active {
    display: flex;
}
.dropdown-content {
    display: flex;
    min-height: 320px;
}
.dropdown-sidebar {
    width: 200px;
    border-right: 1px solid #e0e0e0;
}

.dropdown-sidebar-item {
    padding: 10px 16px;
    font-size: 13px;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.dropdown-sidebar-item:hover {
    background: #ffffff;
}

.dropdown-sidebar-item.active {
    color: #2874f0;
    font-weight: 500;
}

/* RIGHT PANEL */
.dropdown-panel {
    flex: 1;
    padding: 16px 20px;
    max-width: 600px;
}

.dropdown-panel-header {
    font-size: 11px;
    font-weight: 500;
    color: #878787;
    margin-bottom: 12px;
    text-transform: uppercase;
}

.dropdown-panel-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
    gap: 8px;
}

.dropdown-panel-item {
    font-size: 13px;
    color: #212121;
    text-decoration: none;
}

.dropdown-panel-item:hover {
    color: #2874f0;
    font-weight: 500;
}

    
</style>

<!-- catehory list -->
<div class="category-main-container ">
    <div class="categories-row">
        {% for category in categories|slice:":7" %}
        <div class="category-item"onclick="toggleMegaMenu({{ forloop.counter0 }}, event)"id="category-{{ forloop.counter0 }}"style="margin-right: 34px;   cursor: pointer;">
            <div class="category-icon">
                {% if category.image %}
                    <img src="{{ category.image.url }}" alt="{{ category.name }}">
                {% else %}
                    <span style="font-size:20px; font-weight:700;">
                        {{ category.name|first }}
                    </span>
                {% endif %}
            </div>
            <div class="category-name"id="cat-name-{{ forloop.counter0 }}"style="font-size: 16px;    font-weight: 600;  ">{{ category.name }}<span class="dropdown-arrow"></span></div> </div>
        {% endfor %}
    </div>
</div>
<div class="dropdown-overlay" id="dropdown-overlay" onclick="closeAllDropdowns()"></div>
{% for category in categories|slice:":7" %}
<div class="mega-dropdown" id="mega-dropdown-{{ forloop.counter0 }}">
    <div class="dropdown-content">
        <div class="dropdown-sidebar">
            {% for sub in category.subcategories_with_last|slice:":10" %}
            <div class="dropdown-sidebar-item" data-subcat="{{ sub.id }}" onmouseover="showSubcategories({{ sub.id }}, {{ forloop.parentloop.counter0 }})">{{ sub.name }}<span class="arrow-right"></span></div>
            {% endfor %}</div>
        <div class="dropdown-panel">
            <div class="dropdown-panel-header" id="panel-header-{{ forloop.counter0 }}"> More in {{ category.name }}</div>
            <div class="dropdown-panel-grid" id="panel-grid-{{ forloop.counter0 }}">
                <a href="{% url 'dashboard:search_results_grid' %}?category={{ category.id }}"class="dropdown-panel-item"> All</a>
            {% for sub in category.subcategories_with_last %}
                    {% for last_cat in sub.last_categories %}
                        <a href="{% url 'dashboard:search_results_grid' %}?last_category={{ last_cat.id }}"class="dropdown-panel-item">{{ last_cat.name }}</a>
                    {% endfor %}
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endfor %}
{% if last_category %}
<div class="second-popup" id="second-popup">
    <div class="popup-content">
        <div class="popup-body">
        </div>
    </div>
</div>
{% endif %}
<!-- Begin Medical Banner Slider -->
<div class="kt-slider-container mt-7" style="max-width: var(--custom-container-width, 99%);">
    <div class="kt-slider" id="slider">
        {% for banner in banners %}
            <a href="{{ banner.link|default:'#' }}" class="kt-slide">
                <img src="{{ banner.image.url }}" alt="{{ banner.title }}">
            </a>
        {% endfor %}
    </div>
    <!-- Pagination Dots -->
    <div class="kt-dots" id="ktDots">
        {% for banner in banners %}
            <span class="kt-dot" onclick="goToSlide({{ forloop.counter0 }})"></span>
        {% endfor %}
    </div>
    <!-- Navigation Buttons -->
    <button class="kt-nav-btn kt-nav-btn-left" onclick="prevSlide()" aria-label="Previous Slide">‹</button>
    <button class="kt-nav-btn kt-nav-btn-right" onclick="nextSlide()" aria-label="Next Slide">›</button>
</div>
<!-- End Medical Banner Slider -->

<!-- Featured Products -->
<div class="section-container" style="width: 100%; padding: 0;">
    <div style="margin: 0; padding: 20px 0;">
        <div style="display: flex;gap: 16px;justify-content: space-between;flex-wrap: nowrap;padding: 10px 20px;width: 100%;">
{% for product in featured_products|slice:":8" %}
<a href="{% url 'dashboard:product_detail' product.id %}"style="text-decoration: none;color: inherit;flex: 1 1 0;min-width: 0;">
<!-- Product Card -->
                <div
                    onmouseover="this.style.transform='translateY(-6px)';this.style.boxShadow='0 8px 20px rgba(0,0,0,0.12)'"
                    onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'"
                    style="background: #fff;border: 1px solid #e5e7eb;border-radius: 8px;padding: 16px;width: 100%;display: flex; justify-content: center;transition: all 0.3s ease;">
<div style=" display: flex;flex-direction: column;align-items: center;text-align: center; width: 100%;">
 <!-- Product Image -->
<img src="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}" alt="{{ product.name }}" onmouseover="this.style.transform='scale(1.08)'" onmouseout="this.style.transform='scale(1)'"
    style=" height: 140px;width: 100%; max-width: 140px; object-fit: contain; margin-bottom: 12px; border-radius: 4px;transition: transform 0.3s ease; " />
<!-- Product Name -->
<div style="font-size: 14px;font-weight: 500;color: #111; line-height: 1.4;max-width: 100%; white-space: nowrap;overflow: hidden;text-overflow: ellipsis; margin-bottom: 6px; ">
                            {{ product.name }}
                        </div>
<!-- Product Price -->
 <div onmouseover="this.style.color='#111'"   onmouseout="this.style.color='#000'" style="font-size: 16px;font-weight: 700; color: #000; transition: color 0.3s ease">
                            ₹{{ product.price|floatformat:0 }}
                        </div>
                    </div>
                </div>
                <!-- End Product Card -->
            </a>
            {% empty %}
            <div style="color: #999;">
                No featured products available
            </div>
            {% endfor %}
        </div>
    </div>
</div>
<!-- End Featured Products -->

<!-- Most Selling Products -->
{% if most_selling_products %}
<div class="section-container">
    <div style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-size: 25px; font-weight: 600; color: #111;">
            Most Selling Products
        </span>
        <a class="kt-link" href="{% url 'dashboard:search_results_grid' %}?sort=best_selling" style="color: #F8285A; text-decoration: none; font-weight: 500;"> See All <i class="ki-filled ki-right" style="font-size: 12px;"></i> </a></div>
 <div style="display: flex;flex-wrap: wrap;gap: 20px;border: 2px solid #e5e7eb;padding: 20px;background: rgba(255, 255, 255, 0.25);backdrop-filter: blur(12px);-webkit-backdrop-filter: blur(12px);justify-content: space-between; ">
        {% for product in most_selling_products %}
        <div  onmouseover="this.style.transform='translateY(-6px)';this.style.boxShadow='0 10px 22px rgba(0,0,0,0.12)'"  onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'"
         style="flex: 0 0 19%;  position: relative; text-align: center; padding: 15px 10px; background: rgba(208, 204, 204, 0.35); backdrop-filter: blur(10px);-webkit-backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.4); border-radius: 12px;transition: all 0.3s ease;">
 <div style=" position: absolute; top: 10px; left: 10px;background: #16a34a;color: white; padding: 5px 10px; font-size: 12px;font-weight: 600;border-radius: 4px;"> Best Seller</div>
<a href="{% url 'dashboard:product_detail' product.id %}" style="text-decoration:none; color:inherit;">
<div style="width:200px; height:200px; margin:0 auto 12px; position:relative;">{% if product.is_out_of_stock %}
<div style=" position:absolute;inset:0; background:rgba(255,255,255,0.85); display:flex; align-items:center;justify-content:center; z-index:2;">
 <div style="
                            background:#dc2626;
                            color:#fff;
                            padding:8px 14px;
                            font-weight:600;
                        ">
                            Out of Stock
                        </div>
                    </div>
                    {% endif %}

                    <img src="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}"
                         alt="{{ product.name }}"
                         onmouseover="this.style.transform='scale(1.08)'"
                         onmouseout="this.style.transform='scale(1)'"
                         style="
                             width:100%;
                             height:100%;
                             object-fit:contain;
                             transition:transform 0.3s ease;
                         ">
                </div>

                <!-- Name -->
                <div style="
                    font-size:16px;
                    font-weight:600;
                    color:#111;
                    margin-bottom:6px;
                    white-space:nowrap;
                    overflow:hidden;
                    text-overflow:ellipsis;
                ">
                    {{ product.name }}
                </div>

                <!-- Sold Count -->
                {% if product.total_sold %}
                <div style="font-size:13px; color:#6b7280; margin-bottom:4px;">
                    Sold {{ product.total_sold }}+
                </div>
                {% endif %}

                <!-- Price -->
                <div style="
                        font-size:18px;
                        font-weight:700;
                        color:#000;
                    ">
                    {% if product.offer_active and product.offer_percentage %}
                        <span style="
                            font-size:14px;
                            color:#6b7280;
                            text-decoration:line-through;
                        ">
                            ₹{{ product.price|floatformat:0 }}
                        </span>
                        <span style="color:#dc2626;">
                            ₹{{ product.discounted_price|floatformat:0 }}
                        </span>
                    {% else %}
                        ₹{{ product.price|floatformat:0 }}
                    {% endif %}
                </div>

            </a>
        </div>
        <!-- End Product Card -->

        {% empty %}
        <div style="width:100%; text-align:center; padding:40px; color:#9ca3af;">
            No best-selling products available.
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
<br>
<!-- Special Offers -->
<!-- <div class="section-container special-offers-container"> -->
    <!-- {% if special_offers %}
    <div class="space-y-5">
        <div class="flex items-center justify-between gap-4">
            <span class="text-lg font-medium text-gray-100">Special Offers</span>
            <a class="kt-link" href="{% url 'dashboard:search_results_grid' %}?{{ request.GET.urlencode }}">See All <i class="ki-filled ki-right text-xs"></i></a>
        </div>
        <div class="grid xl:grid-cols-2 gap-5 mb-2">
            {% for product in special_offers %}
            {% if forloop.first %}
            <div class="lg:col-span-1">
                <div class="kt-card h-full bg-violet-50 border-violet-200 dark:border-violet-950 dark:bg-violet-950/30 relative">
                    {% if product.offer_active and product.offer_percentage %}
                    <div class="discount-ribbon">save {{ product.offer_percentage|floatformat:0 }}%</div>
                    {% endif %}
                    <div class="kt-card-content flex items-center flex-wrap sm:flex-nowrap justify-between gap-5 lg:gap-9 lg:px-7.5 p-5">
                        <div class="flex flex-col">
                            <div class="mb-3">
                                {% if product.offer_active and product.offer_percentage %}
                                {% endif %}
                            </div>
                            <h3 class="text-xl sm:text-[26px] font-semibold text-mono mb-1">{{ product.name|default:'Unnamed Product' }}</h3>
                            <span class="text-sm font-normal text-foreground mb-5 leading-5.5 line-clamp-1 overflow-hidden">
                                {{ product.description|default:'No description available'|truncatechars:120 }}
                            </span>
                            <div class="flex items-center gap-4 flex-wrap">
                                <div class="cart-button-container" data-product-id="{{ product.id }}">
    {% if request.user.is_authenticated %}
        {% if product.id in user_cart_ids %}
            <div class="cart-quantity-controls flex items-center gap-2">
                <button class="decrease-btn px-2 py-1 bg-gray-200 rounded text-sm">-</button>
                <span class="quantity font-semibold">{{ user_cart_quantities|get_item:product.id }}</span>
                <button class="increase-btn px-2 py-1 bg-gray-200 rounded text-sm">+</button>
            </div>
        {% else %}
            <button class="kt-btn kt-btn-outline kt-btn-xs flex items-center gap-1 add-to-cart-btn">
                Add <i class="ki-filled ki-handcart text-xs"></i>
            </button>
        {% endif %}
    {% else %}
        <button class="kt-btn kt-btn-outline kt-btn-xs flex items-center gap-1 show-login-modal">
            Add <i class="ki-filled ki-handcart text-xs"></i>
        </button>
    {% endif %}
</div>
                                {% if request.user.is_authenticated %}
                                    {% if product.show_rfq or product.Both %}
                                    <button class="kt-btn kt-btn-outline kt-btn-xs open-rfq-modal"
                                            data-product-id="{{ product.id }}"
                                            data-product-name="{{ product.name }}"
                                            data-product-price="{{ product.discounted_price|floatformat:2 }}"
                                            data-company-name="{{ company_name|default:'' }}"
                                            data-quantity="1">
                                        RFQ <i class="ki-filled ki-directbox-default"></i>
                                    </button>
                                    {% endif %}
                                {% endif %}
                                {% if request.user.is_authenticated %}
                                    <span class="kt-wishlist-icon absolute top-2 end-2 cursor-pointer"
                                          data-kt-wishlist-toggle="true"
                                          data-product-id="{{ product.id }}"
                                          title="{% if product.id in user_wishlist_ids %}Remove from Wishlist{% else %}Add to Wishlist{% endif %}">
                                        <i class="ki-solid ki-heart {% if product.id in user_wishlist_ids %}text-red-500{% endif %}"></i>
                                    </span>
                                {% else %}
                                    <span class="kt-wishlist-icon absolute top-2 end-2 cursor-pointer show-login-modal"
                                          title="Login to Add to Wishlist">
                                        <i class="ki-solid ki-heart"></i>
                                    </span>
                                {% endif %}
                                    {% if product.offer_active and product.offer_percentage %}
                                    <span class="text-base font-normal text-secondary-foreground line-through pt-[1px]">
                                        ${{ product.price|floatformat:2 }}
                                    </span>
                                    <span class="text-base font-semibold text-mono">${{ product.discounted_price|floatformat:2 }}</span>
                                    {% else %}
                                    <span class="text-base font-semibold text-mono">${{ product.price|floatformat:2 }}</span>
                                    {% endif %}
                            </div>
                        </div>
                        <a href="{% url 'dashboard:product_detail' product.id %}" class="block">
                            <img alt="{{ product.name|default:'Unnamed Product' }}"
                                 class="size-32 sm:size-48 shrink-0 cursor-pointer product-thumbnail"
                                 src="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}"
                                 data-product-name="{{ product.name|default:'Unnamed Product' }}"
                                 data-product-description="{{ product.description|default:'No description available' }}"
                                 data-product-image="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}"
                                 data-product-sku="{{ product.sku|default:'N/A' }}"
                                 data-product-category="{{ product.category|default:'Uncategorized' }}"
                                 data-product-rating="{{ product.rating|default:'4.5' }}"
                                 data-product-more-info="{{ product.more_info|default:'No additional info' }}"
                                 data-product-price="{{ product.discounted_price|floatformat:2 }}"
                                 data-product-original-price="{% if product.offer_active and product.offer_percentage %}{{ product.price|floatformat:2 }}{% endif %}"
                                 data-product-discount="{% if product.offer_active and product.offer_percentage %}save {{ product.offer_percentage|floatformat:0 }}%{% endif %}"/>
                        </a>
                    </div>
                </div>
            </div>
            <div class="lg:col-span-1">
                <div class="grid sm:grid-cols-2 gap-5 items-stretch">
            {% else %}
                    <div class="kt-card h-full bg-green-50 dark:bg-green-950/30 border-green-200 dark:border-green-950 relative">
                        {% if product.offer_active and product.offer_percentage %}
                        <div class="discount-ribbon">save {{ product.offer_percentage|floatformat:0 }}%</div>
                        {% endif %}
                        <div class="kt-card-content flex flex-col items-center justify-center px-5 pb-0">
                            <a href="{% url 'dashboard:product_detail' product.id %}" class="block">
                                <img alt="{{ product.name|default:'Unnamed Product' }}"
                                     class="size-32 sm:size-48 shrink-0 cursor-pointer product-thumbnail"
                                     src="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}"
                                     data-product-name="{{ product.name|default:'Unnamed Product' }}"
                                     data-product-description="{{ product.description|default:'No description available' }}"
                                     data-product-image="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}"
                                     data-product-sku="{{ product.sku|default:'N/A' }}"
                                     data-product-category="{{ product.category|default:'Uncategorized' }}"
                                     data-product-rating="{{ product.rating|default:'4.5' }}"
                                     data-product-more-info="{{ product.more_info|default:'No additional info' }}"
                                     data-product-price="{{ product.discounted_price|floatformat:2 }}"
                                     data-product-original-price="{% if product.offer_active and product.offer_percentage %}{{ product.price|floatformat:2 }}{% endif %}"
                                     data-product-discount="{% if product.offer_active and product.offer_percentage %}save {{ product.offer_percentage|floatformat:0 }}%{% endif %}"/>
                            </a>
                            <div class="mb-3.5">
                                {% if product.offer_active and product.offer_percentage %}
                                    <span class="text-sm font-normal text-secondary-foreground line-through pt-[1px]">
                                        ${{ product.price|floatformat:2 }}
                                    </span>
                                    <span class="text-sm font-medium text-mono">${{ product.discounted_price|floatformat:2 }}</span>
                                {% else %}
                                    <span class="text-sm font-medium text-mono">${{ product.price|floatformat:2 }}</span>
                                {% endif %}
                            </div>
                            <span class="text-base font-medium text-mono mb-3">{{ product.name|default:'Unnamed Product' }}</span>
                            <div class="flex items-center gap-2.5 mb-2.5 flex-wrap justify-center">
                                <div class="cart-button-container" data-product-id="{{ product.id }}">
    {% if request.user.is_authenticated %}
        {% if product.id in user_cart_ids %}
            <div class="cart-quantity-controls flex items-center gap-2">
                <button class="decrease-btn px-2 py-1 bg-gray-200 rounded text-sm">-</button>
                <span class="quantity font-semibold">{{ user_cart_quantities|get_item:product.id }}</span>
                <button class="increase-btn px-2 py-1 bg-gray-200 rounded text-sm">+</button>
            </div>
        {% else %}
            <button class="kt-btn kt-btn-outline kt-btn-xs flex items-center gap-1 add-to-cart-btn">
                Add <i class="ki-filled ki-handcart text-xs"></i>
            </button>
        {% endif %}
    {% else %}
        <button class="kt-btn kt-btn-outline kt-btn-xs flex items-center gap-1 show-login-modal">
            Add <i class="ki-filled ki-handcart text-xs"></i>
        </button>
    {% endif %}
</div>
                                {% if request.user.is_authenticated %}
                                    {% if product.show_rfq or product.Both %}
                                    <button class="kt-btn kt-btn-outline kt-btn-xs open-rfq-modal"
                                            data-product-id="{{ product.id }}"
                                            data-product-name="{{ product.name }}"
                                            data-product-price="{{ product.discounted_price|floatformat:2 }}"
                                            data-company-name="{{ company_name|default:'' }}"
                                            data-quantity="1">
                                        RFQ <i class="ki-filled ki-directbox-default"></i>
                                    </button>
                                    {% endif %}
                                {% endif %}
                                <span class="kt-wishlist-icon absolute top-2 end-2 cursor-pointer"
                                      data-kt-wishlist-toggle="true"
                                      data-product-id="{{ product.id }}"
                                      title="{% if product.id in user_wishlist_ids %}Remove from Wishlist{% else %}Add to Wishlist{% endif %}">
                                    <i class="ki-solid ki-heart {% if product.id in user_wishlist_ids %}text-red-500{% endif %}"></i>
                                </span>
                            </div>
                            {% if product.offer_active and product.offer_percentage %}
                            {% endif %}
                        </div>
                    </div>
            {% endif %}
            {% empty %}
            <div class="col-span-full text-center py-10 text-gray-400">
                No special offers available at the moment.
            </div>
            {% endfor %}
            {% if special_offers and special_offers|length > 1 %}
                </div>
            </div>
            {% endif %}
        </div>
    </div>
    {% endif %} -->
<!-- New Arrivals Section -->
{% if recent_products %}
<div class="section-container">

    <!-- Header -->
    <div style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-size: 28px; font-weight: 600; color: #111;">New Arrivals</span>
        <a class="kt-link"
           href="{% url 'dashboard:search_results_grid' %}?{{ request.GET.urlencode }}"
           style="color: #F8285A; text-decoration: none; font-weight: 600; font-size: 16px;">
            See All <i class="ki-filled ki-right" style="font-size: 14px;"></i>
        </a>
    </div>
    

    <!-- Products Grid -->
    <div style="
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        border: 2px solid #e5e7eb;
        padding: 20px;
        background: white;
        justify-content: space-between;
    ">
    
        {% for product in recent_products %}
        <a href="{% url 'dashboard:product_detail' product.id %}"
           style="
                text-decoration: none;
                color: inherit;
                flex: 0 0 calc(16.666% - 17px);
                position: relative;
           ">

            <!-- Product Card -->
            <div
                onmouseover="this.style.transform='translateY(-6px)';this.style.boxShadow='0 10px 22px rgba(0,0,0,0.12)'"
                onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'"
                style="
                    padding: 15px 10px;
                    background: #fff;
                    text-align: center;
                    transition: all 0.3s ease;
                ">

                <div style="display: flex; flex-direction: column; align-items: center; text-align: center;">

                    <!-- Product Image -->
                    <div style="position: relative; width: 200px; height: 200px; margin-bottom: 15px;">

                        {% if product.is_out_of_stock %}
                        <!-- Out of Stock Overlay -->
                        <div style="
                            position: absolute;
                            top: 0;
                            left: 0;
                            right: 0;
                            bottom: 0;
                            background: rgba(255, 255, 255, 0.85);
                            display: flex;
                            align-items: center;
                            justify-content: center;
                            z-index: 2;
                        ">
                            <div style="
                                background: #dc2626;
                                color: white;
                                padding: 10px 16px;
                                border-radius: 6px;
                                font-weight: 600;
                                font-size: 0.9rem;
                                text-transform: uppercase;
                                letter-spacing: 0.5px;
                                box-shadow: 0 2px 8px rgba(220, 38, 38, 0.3);
                            ">
                                Out of Stock
                            </div>
                        </div>
                        {% endif %}

                        <img src="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}"
                             alt="{{ product.name }}"
                             onmouseover="this.style.transform='scale(1.08)'"
                             onmouseout="this.style.transform='scale(1)'"
                             style="
                                 width: 100%;
                                 height: 100%;
                                 object-fit: contain;
                                 transition: transform 0.3s ease;
                             " />
                    </div>

                    <!-- Product Name -->
                    <div style="
                        font-size: 16px;
                        font-weight: 600;
                        color: #111;
                        margin-bottom: 8px;
                        line-height: 1.3;
                        max-width: 200px;
                        white-space: nowrap;
                        overflow: hidden;
                        text-overflow: ellipsis;
                    ">
                        {{ product.name }}
                    </div>

                    <!-- Product Price -->
                    <div
                        onmouseover="this.style.color='#111'"
                        onmouseout="this.style.color='#000'"
                        style="
                            font-size: 18px;
                            font-weight: 700;
                            color: #000;
                            transition: color 0.3s ease;
                        ">
                        {% if product.offer_percentage and product.offer_active %}
                            <span style="
                                font-size: 14px;
                                font-weight: normal;
                                color: #6b7280;
                                text-decoration: line-through;
                                margin-right: 6px;
                            ">
                                ₹{{ product.price|floatformat:0 }}
                            </span>
                            <span style="color: #dc2626;">
                                ₹{{ product.discounted_price|floatformat:0 }}
                            </span>
                        {% elif product.original_price and product.original_price > product.price %}
                            <span style="
                                font-size: 14px;
                                font-weight: normal;
                                color: #6b7280;
                                text-decoration: line-through;
                                margin-right: 6px;
                            ">
                                ₹{{ product.original_price|floatformat:0 }}
                            </span>
                            <span style="color: #dc2626;">
                                ₹{{ product.price|floatformat:0 }}
                            </span>
                        {% else %}
                            ₹{{ product.price|floatformat:0 }}
                        {% endif %}
                    </div>

                    <!-- Discount Badge -->
                    {% if product.offer_active and product.offer_percentage %}
                    <div style="
                        position: absolute;
                        top: 10px;
                        right: 10px;
                        background: #dc2626;
                        color: white;
                        padding: 5px 10px;
                        border-radius: 4px;
                        font-size: 12px;
                        font-weight: 600;
                    ">
                        {{ product.offer_percentage|floatformat:0 }}% OFF
                    </div>
                    {% endif %}

                </div>
            </div>
            <!-- End Product Card -->

        </a>
        {% empty %}
        <div style="width: 100%; text-align: center; padding: 40px 0; color: #9ca3af;">
            No new arrivals available at the moment.
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
<br>
<!-- Limited-Time Deals -->
{% if limited_products %}
<div class="section-container">

    <!-- Header -->
    <div style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
        <span style="font-size: 27px; font-weight: 700; color: #111;">
            Limited-Time Deals
        </span>
        <a class="kt-link"
           href="{% url 'dashboard:search_results_grid' %}?{{ request.GET.urlencode }}"
           style="color: #F8285A; text-decoration: none; font-weight: 500;">
            See All <i class="ki-filled ki-right" style="font-size: 12px;"></i>
        </a>
    </div>

    <!-- Products Grid -->
    <div style="
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        border: 2px solid #e5e7eb;
        padding: 20px;
        background: white;
        justify-content: space-between;
    ">
        {% for product in limited_products %}

        <!-- Product Card -->
        <div
            onmouseover="this.style.transform='translateY(-6px)';this.style.boxShadow='0 10px 22px rgba(0,0,0,0.12)'"
            onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'"
            style="
                flex: 0 0 calc(16.666% - 17px);
                position: relative;
                text-align: center;
                padding: 15px 10px;
                background: #fff;
                transition: all 0.3s ease;
            ">

            <!-- Discount Badge -->
            {% if product.offer_active and product.offer_percentage %}
            <div style="
                position: absolute;
                top: 10px;
                right: 10px;
                background: #dc2626;
                color: white;
                padding: 5px 10px;
                font-size: 12px;
                font-weight: 600;
            ">
                {{ product.offer_percentage|floatformat:0 }}% OFF
            </div>
            {% endif %}

            <a href="{% url 'dashboard:product_detail' product.id %}"
               style="text-decoration:none; color:inherit;">

                <!-- Image -->
                <div style="width:200px; height:200px; margin:0 auto 12px; position:relative;">

                    {% if product.is_out_of_stock %}
                    <div style="
                        position:absolute;
                        inset:0;
                        background:rgba(255,255,255,0.85);
                        display:flex;
                        align-items:center;
                        justify-content:center;
                        z-index:2;
                    ">
                        <div style="
                            background:#dc2626;
                            color:#fff;
                            padding:8px 14px;
                            font-weight:600;
                        ">
                            Out of Stock
                        </div>
                    </div>
                    {% endif %}

                    <img src="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}"
                         alt="{{ product.name }}"
                         onmouseover="this.style.transform='scale(1.08)'"
                         onmouseout="this.style.transform='scale(1)'"
                         style="
                             width:100%;
                             height:100%;
                             object-fit:contain;
                             transition:transform 0.3s ease;
                         ">
                </div>

                <!-- Name -->
                <div style="
                    font-size:16px;
                    font-weight:600;
                    color:#111;
                    margin-bottom:6px;
                    white-space:nowrap;
                    overflow:hidden;
                    text-overflow:ellipsis;
                ">
                    {{ product.name }}
                </div>

                <!-- Price -->
                <div
                    onmouseover="this.style.color='#111'"
                    onmouseout="this.style.color='#000'"
                    style="
                        font-size:18px;
                        font-weight:700;
                        color:#000;
                        transition:color 0.3s ease;
                    ">
                    {% if product.offer_percentage and product.offer_active %}
                        <span style="
                            font-size:14px;
                            color:#6b7280;
                            text-decoration:line-through;
                        ">
                            ${{ product.price|floatformat:2 }}
                        </span>
                        <span style="color:#dc2626;">
                            ${{ product.discounted_price|floatformat:2 }}
                        </span>
                    {% else %}
                        ${{ product.price|floatformat:2 }}
                    {% endif %}
                </div>

            </a>
        </div>
        <!-- End Product Card -->

        {% empty %}
        <div style="width:100%; text-align:center; padding:40px; color:#9ca3af;">
            No limited-time deals available at the moment.
        </div>
        {% endfor %}
    </div>
</div>
{% endif %}
<br>

<!-- Conference & Webinar Events -->
{% if conference_products %}
<div class="section-container">
    <div class="space-y-4">

        <!-- Header -->
        <div class="flex items-center justify-between gap-4">
            <span class="w-full text-center text-4xl sm:text-5xl font-bold tracking-wide text-gray-100">
                Conference & Webinar Events
            </span>
            
            <br><br><br><br>

            {% with conference_category=special_categories|filter_by_name:'Conference' %}
                <a class="kt-link"
                   href="{% url 'dashboard:Confarance_list' %}?category={{ conference_category.id }}">
                    See All <i class="ki-filled ki-right text-xs"></i>
                </a>
            {% endwith %}
        </div>

        <!-- Cards Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 mb-2">
            {% for product in conference_products|slice:":4" %}

            <!-- Product Card -->
            <div class="kt-card product-card"
                 onmouseover="this.style.transform='translateY(-6px)';this.style.boxShadow='0 10px 22px rgba(0,0,0,0.12)'"
                 onmouseout="this.style.transform='translateY(0)';this.style.boxShadow='none'"
                 style="
                     background:#fff;
                     border-radius:0;
                     border:1px solid #e5e7eb;
                     transition:all 0.3s ease;
                 ">

                <div class="kt-card-content flex flex-col justify-between p-2.5 gap-4 h-full">

                    <div class="mb-2.5">

                        <!-- Image Container -->
                        <div class="kt-card flex items-center justify-center relative w-full h-[180px] sm:h-[250px] mb-4 shadow-none"
                             style="background:#fff;border-radius:0;border:1px solid #ffffff;">

                            <a href="{% url 'dashboard:product_detail' product.id %}" class="block">
                                <img
                                    alt="{{ product.name|default:'Unnamed Event' }}"
                                    class="h-[150px] sm:h-[180px] shrink-0 cursor-pointer product-thumbnail"
                                    src="{% if product.main_image %}{{ product.main_image }}{% else %}{% static 'default.png' %}{% endif %}"
                                    onmouseover="this.style.transform='scale(1.08)'"
                                    onmouseout="this.style.transform='scale(1)'"
                                    style="
                                        border-radius:0;
                                        transition:transform 0.3s ease;
                                    "
                                />
                            </a>
                        </div>

                        <!-- Title -->
                        <h3 class="text-md sm:text-lg font-bold text-gray-650 truncate">
                            {{ product.name }}
                        </h3>

                        <!-- Description -->
                        <p class="text-xs sm:text-sm text-gray-650 mt-1 truncate">
                            {{ product.description|default:"No description available"|truncatechars:120 }}
                        </p>

                        {% if product.event %}
                            {% if product.event.conference_at %}
                            <p class="text-xs text-green-600 mt-1">
                                Event Date:
                                <strong>{{ product.event.conference_at|date:"D, d M Y, H:i" }}</strong>
                            </p>
                            {% endif %}

                            {% if product.event.speaker_name %}
                            <p class="text-xs text-gray-600 mt-1">
                                Speaker: <strong>{{ product.event.speaker_name }}</strong>
                            </p>
                            {% endif %}

                            {% if product.event.venue %}
                            <p class="text-xs text-gray-600 mt-1">
                                Venue: <strong>{{ product.event.venue }}</strong>
                            </p>
                            {% endif %}

                            {% if product.event.duration %}
                            <p class="text-xs text-gray-600 mt-1">
                                Duration: <strong>{{ product.event.formatted_duration }}</strong>
                            </p>
                            {% endif %}
                        {% endif %}
                    </div>

                    <!-- Button Area -->
                    <div class="flex items-center justify-between px-2.5 pb-1">

                        {% if request.user.is_authenticated %}
                            {% if product.id in user_registered_event_ids %}
                                <button class="kt-btn kt-btn-sm"
                                        style="background:#9ca3af;color:#fff;border-radius:0;"
                                        disabled>
                                    Registered
                                </button>
                            {% else %}
                                <button class="kt-btn kt-btn-sm open-event-registration-modal"
                                        onmouseover="this.style.filter='brightness(1.1)'"
                                        onmouseout="this.style.filter='brightness(1)'"
                                        style="
                                            background:#2563eb;
                                            color:#fff;
                                            border-radius:0;
                                            transition:filter 0.3s ease;
                                        "
                                        data-product-id="{{ product.id }}"
                                        data-event-name="{{ product.name }}">
                                    Register for Event
                                </button>
                            {% endif %}
                        {% else %}
                            <button class="kt-btn kt-btn-sm show-login-modal"
                                    onmouseover="this.style.filter='brightness(1.1)'"
                                    onmouseout="this.style.filter='brightness(1)'"
                                    style="
                                        background:#2563eb;
                                        color:#fff;
                                        border-radius:0;
                                        transition:filter 0.3s ease;
                                    ">
                                Register for Event
                            </button>
                        {% endif %}
                    </div>

                </div>
            </div>
            <!-- End Card -->

            {% endfor %}
        </div>
    </div>
</div>
{% endif %}



<!-- category -->
<!-- <div class="container mx-auto p-6 section-container"> -->
    <!-- Tabs -->
    <!-- <div class="flex items-center justify-between gap-4 mb-4">
        <div class="flex gap-4">
            <button class="tab-button active" data-tab="categories">Categories</button>
            <button class="tab-button" data-tab="suppliers">Manufacturers / Distributors</button>
        </div>
        <div id="view-all" class="hidden">
            {% if has_more_suppliers %}
                <a href="{% url 'dashboard:supplier_list' %}" class="text-blue-600 hover:underline font-medium">View All</a>
            {% endif %}
        </div>
    </div> -->

    <!-- Categories Tab Content -->
    <!-- <div id="categories" class="tab-content">
        <div class="grid grid-cols-custom mb-4">
            {% for category in categories %}
            <a href="{% url 'dashboard:category_products_list' category.id %}" 
               class="card block group text-center">
                <div class="w-full h-40 sm:h-48 overflow-hidden rounded-md">
                    <img src="{% if category.image %}{{ category.image.url }}{% else %}{% static 'default.png' %}{% endif %}" 
                         alt="{{ category.name }}" 
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                </div>
                <h3 class="mt-2 text-sm sm:text-base font-semibold text-gray-800 group-hover:text-blue-600">
                    {{ category.name }}
                </h3>
            </a>
            {% empty %}
            <div class="col-span-full text-center py-10 text-gray-400">
                No categories available at the moment.
            </div>
            {% endfor %}
        </div>
    </div> -->

    <!-- Suppliers Tab Content -->
    <!-- <div id="suppliers" class="tab-content hidden">
        <div class="grid grid-cols-custom mb-4">
            {% for supplier in suppliers %}
            <a href="{% url 'dashboard:supplier_products' supplier.user.id %}" 
               class="card block group text-center">
                <div class="w-full h-40 sm:h-48 overflow-hidden rounded-md">
                    <img src="{% if supplier.company_logo %}{{ supplier.company_logo.url }}{% else %}{% static 'default.png' %}{% endif %}" 
                         alt="{{ supplier.company_name }}" 
                         class="w-full h-full object-cover transition-transform duration-300 group-hover:scale-105">
                </div>
                <h3 class="mt-2 text-sm sm:text-base font-semibold text-gray-800 group-hover:text-blue-600">
                    {{ supplier.company_name }}
                </h3>
            </a>
            {% empty %}
            <div class="col-span-full text-center py-10 text-gray-400">
                No manufacturers/distributors available at the moment.
            </div>
            {% endfor %}
        </div>
    </div>
</div> -->

<!-- Customer Feedback Section - 3 Column Auto Scroll (Center Up, Sides Down) -->
<div class="section-container" style="
    margin: 3rem 0;
    padding: 3rem 0;
    background: #f9fafb;
    border-radius: 12px;
">
    <!-- Section Header -->
    <div style="text-align: center; margin-bottom: 3rem;">
        <h2 style="
            font-size: 2.25rem;
            font-weight: 700;
            color: #111827;
            margin-bottom: 1rem;
        ">
            WHAT OUR CUSTOMERS SAY
        </h2>
        <p style="color: #6b7280; font-size: 1.125rem;">
            Real feedback from medical professionals who trust our platform
        </p>
    </div>

    <!-- 3 Column Layout with Auto-scrolling Columns -->
    <div style="
        max-width: 1200px;
        margin: 0 auto;
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 2rem;
        position: relative;
        height: 500px;
        overflow: hidden;
    ">
        <!-- Column 1 (LEFT - Scrolls DOWN) -->
        <div class="scroll-column" style="
            position: relative;
            height: 100%;
            overflow: hidden;
        ">
            <div class="scroll-content-left" style="
                animation: scrollDown 30s linear infinite;
            ">
                <!-- Testimonial 1 -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        The simplicity of how the system works and customer service is always available. 
                        I utilize the system daily on my computer and my cell phone as well.
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Ariana-L.webp" 
                             alt="Ariana L." 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">ARIANA L.</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Hospital Administrator</p>
                        </div>
                    </div>
                </div>
                
                <!-- Testimonial 2 -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        I've been using Medical for over 4 years now. I used to send messages to prospects using a 1 to 1 delivery, 
                        the bulk texting feature has been instrumental for my business growth.
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Gustavo-H.-M.webp" 
                             alt="Gustavo H. M." 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">GUSTAVO H. M.</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Medical Practice Owner</p>
                        </div>
                    </div>
                </div>
                
                <!-- Duplicate for seamless scroll -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        The simplicity of how the system works and customer service is always available. 
                        I utilize the system daily on my computer and my cell phone as well.
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Ariana-L.webp" 
                             alt="Ariana L." 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">ARIANA L.</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Hospital Administrator</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Column 2 (CENTER - Scrolls UP) -->
        <div class="scroll-column" style="
            position: relative;
            height: 100%;
            overflow: hidden;
        ">
            <div class="scroll-content-center" style="
                animation: scrollUp 25s linear infinite;
            ">
                <!-- Testimonial 3 -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        I like how it gives you so many options to organize, customize, and set up messages 
                        so you don't have to manually text as much.
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Saphire-G.webp" 
                             alt="Saphire G." 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">SAPHIRE G.</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Medical Practice Manager</p>
                        </div>
                    </div>
                </div>
                
                <!-- Testimonial 4 -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        Excellent service I used other texting apps in the past but none come close to textdrip. 
                        I've increased my sales and work seems to come a lot easier for me now. 10/10
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Gabriela-A.webp" 
                             alt="Gabriela A." 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">GABRIELA A.</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Medical Sales Director</p>
                        </div>
                    </div>
                </div>
                
                <!-- Duplicate for seamless scroll -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        I like how it gives you so many options to organize, customize, and set up messages 
                        so you don't have to manually text as much.
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Saphire-G.webp" 
                             alt="Saphire G." 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">SAPHIRE G.</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Medical Practice Manager</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Column 3 (RIGHT - Scrolls DOWN) -->
        <div class="scroll-column" style="
            position: relative;
            height: 100%;
            overflow: hidden;
        ">
            <div class="scroll-content-right" style="
                animation: scrollDown 35s linear infinite;
                animation-delay: -5s;
            ">
                <!-- Testimonial 5 -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        Medical is very helpful and makes running business easier! 
                        Have the extension that flawlessly adds contacts, campaigns and pipelines!
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Alicia-Lebron.webp" 
                             alt="Alicia Lebron" 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">ALICIA LEBRON</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Clinic Owner</p>
                        </div>
                    </div>
                </div>
                
                <!-- Testimonial 6 -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        Very quick and easy to use. It has made my life easier every day.
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Ryan-D.webp" 
                             alt="Ryan D." 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">RYAN D.</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Healthcare Consultant</p>
                        </div>
                    </div>
                </div>
                
                <!-- Duplicate for seamless scroll -->
                <div style="
                    background: white;
                    border-radius: 12px;
                    padding: 1.5rem;
                    margin-bottom: 1.5rem;
                    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
                ">
                    <img src="https://textdrip.com/wp-content/themes/textdrip/assets/images/quote.webp" 
                         alt="quote" 
                         style="width: 40px; height: 40px; margin-bottom: 1rem;">
                    <p style="color: #4b5563; font-size: 0.95rem; line-height: 1.6; margin-bottom: 1.5rem; font-style: italic;">
                        Medical is very helpful and makes running business easier! 
                        Have the extension that flawlessly adds contacts, campaigns and pipelines!
                    </p>
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <img src="https://textdrip.com/wp-content/uploads/2025/07/Alicia-Lebron.webp" 
                             alt="Alicia Lebron" 
                             style="width: 48px; height: 48px; border-radius: 50%; object-fit: cover;">
                        <div>
                            <p style="font-weight: 600; color: #111827; margin: 0; font-size: 0.95rem;">ALICIA LEBRON</p>
                            <p style="color: #6b7280; font-size: 0.85rem; margin: 0;">Clinic Owner</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Gradient Overlays -->
        <div style="
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to bottom, #f9fafb, transparent);
            pointer-events: none;
            z-index: 2;
        "></div>
        <div style="
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 60px;
            background: linear-gradient(to top, #f9fafb, transparent);
            pointer-events: none;
            z-index: 2;
        "></div>
        
        <!-- Control Buttons -->
        <div style="
            position: absolute;
            bottom: 20px;
            right: 20px;
            z-index: 3;
            display: flex;
            gap: 10px;
        ">
            <button id="pauseAllScroll" onclick="toggleAllScroll()" style="
                background: white;
                border: 1px solid #e5e7eb;
                border-radius: 50%;
                width: 40px;
                height: 40px;
                display: flex;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
                transition: all 0.2s;
                font-size: 18px;
            ">
                ⏸️
            </button>
        </div>
    </div>
</div>
<!-- supplier list -->
<section style="
    background: rgba(13, 71, 161, 0.55);  /* #0D47A1 with transparency */
    backdrop-filter: blur(14px);
    -webkit-backdrop-filter: blur(14px);
    padding:80px 0;
">


    <div style="max-width:1280px; margin:auto; padding:0 16px;">

        <!-- Heading -->
        <h2 style="
            text-align:center;
            font-size:33px;
            font-weight:600;
            color:#ffffff;
            margin-bottom:48px;">
            Our Trusted Suppliers
        </h2>

        <!-- Supplier Grid -->
        <div style="
            display:grid;
            grid-template-columns:repeat(auto-fit, minmax(180px, 1fr));
            gap:28px;">

            {% for supplier in suppliers %}
            <a href="{% url 'dashboard:supplier_products' supplier.user.id %}"
               style="text-decoration:none;">

                <!-- Card -->
                <div style="
                    background:#ffffff;
                    border:1.5px solid #93c5fd;
                    border-radius:14px;
                    padding:24px 16px;
                    text-align:center;
                    box-shadow:0 6px 14px rgba(0,0,0,0.25);
                    transition:all 0.3s ease;
                "
                onmouseover="this.style.transform='translateY(-4px)'; this.style.boxShadow='0 12px 26px rgba(0,0,0,0.35)'"
                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 6px 14px rgba(0,0,0,0.25)'">

                    <!-- Logo -->
                    <div style="
                        width:70px;
                        height:70px;
                        margin:0 auto 14px;
                        background:#e0f2fe;
                        border-radius:12px;
                        display:flex;
                        align-items:center;
                        justify-content:center;
                    ">
                        <img src="{% if supplier.company_logo %}
                                    {{ supplier.company_logo.url }}
                                 {% else %}
                                    {% static 'default.png' %}
                                 {% endif %}"
                             alt="{{ supplier.company_name }}"
                             style="
                                width:48px;
                                height:48px;
                                object-fit:contain;
                             ">
                    </div>

                    <!-- Supplier Name -->
                    <div style="
                        font-size:14px;
                        font-weight:500;
                        color:#0f172a;
                        line-height:1.4;">
                        {{ supplier.company_name }}
                    </div>

                </div>
            </a>

            {% empty %}
            <div style="
                grid-column:1/-1;
                text-align:center;
                color:#cbd5f5;
                padding:40px;">
                No suppliers available at the moment.
            </div>
            {% endfor %}

        </div>
    </div>
</section>

    <!-- Benefits -->
    {% comment %}
    <div class="section-container">
        <div class="grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-4 gap-4 mb-2 benefits-grid">
            <div class="kt-card">
                <div class="kt-card-content flex items-center gap-3.5 px-5 py-4">
                    <div class="relative size-[50px] shrink-0">
                        <svg class="w-full h-full stroke-primary/10 fill-primary-soft" fill="none" height="48"
                             viewBox="0 0 44 48" width="44" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 2.4641C19.7128 0.320509 24.2872 0.320508 28 2.4641L37.6506 8.0359C41.3634 10.1795 43.6506 14.141 43.6506 18.4282V29.5718C43.6506 33.859 41.3634 37.8205 37.6506 39.9641L28 45.5359C24.2872 47.6795 19.7128 47.6795 16 45.5359L6.34937 39.9641C2.63655 37.8205 0.349365 33.859 0.349365 29.5718V18.4282C0.349365 14.141 2.63655 10.1795 6.34937 8.0359L16 2.4641Z"
                                  fill=""></path>
                            <path d="M16.25 2.89711C19.8081 0.842838 24.1919 0.842837 27.75 2.89711L37.4006 8.46891C40.9587 10.5232 43.1506 14.3196 43.1506 18.4282V29.5718C43.1506 33.6804 40.9587 37.4768 37.4006 39.5311L27.75 45.1029C24.1919 47.1572 19.8081 47.1572 16.25 45.1029L6.59937 39.5311C3.04125 37.4768 0.849365 33.6803 0.849365 29.5718V18.4282C0.849365 14.3196 3.04125 10.5232 6.59937 8.46891L16.25 2.89711Z"
                                  stroke=""></path>
                        </svg>
                        <div class="absolute leading-none start-2/4 top-2/4 -translate-y-2/4 -translate-x-2/4">
                            <i class="ki-filled ki-delivery-time text-xl ps-px text-primary"></i>
                        </div>
                    </div>
                    <div class="flex flex-col">
                        <a class="hover:text-primary text-md font-medium text-mono" href="#">Free Delivery</a>
                        <span class="text-xs font-normal text-secondary-foreground">No extra shipping costs</span>
                    </div>
                </div>
            </div>
            <div class="kt-card">
                <div class="kt-card-content flex items-center gap-3.5 px-5 py-4">
                    <div class="relative size-[50px] shrink-0">
                        <svg class="w-full h-full stroke-success-transparent fill-success-soft" fill="none"
                             height="48" viewBox="0 0 44 48" width="44" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 2.4641C19.7128 0.320509 24.2872 0.320508 28 2.4641L37.6506 8.0359C41.3634 10.1795 43.6506 14.141 43.6506 18.4282V29.5718C43.6506 33.859 41.3634 37.8205 37.6506 39.9641L28 45.5359C24.2872 47.6795 19.7128 47.6795 16 45.5359L6.34937 39.9641C2.63655 37.8205 0.349365 33.859 0.349365 29.5718V18.4282C0.349365 14.141 2.63655 10.1795 6.34937 8.0359L16 2.4641Z"
                                  fill=""></path>
                            <path d="M16.25 2.89711C19.8081 0.842838 24.1919 0.842837 27.75 2.89711L37.4006 8.46891C40.9587 10.5232 43.1506 14.3196 43.1506 18.4282V29.5718C43.1506 33.6804 40.9587 37.4768 37.4006 39.5311L27.75 45.1029C24.1919 47.1572 19.8081 47.1572 16.25 45.1029L6.59937 39.5311C3.04125 37.4768 0.849365 33.6803 0.849365 29.5718V18.4282C0.849365 14.3196 3.04125 10.5232 6.59937 8.46891L16.25 2.89711Z"
                                  stroke=""></path>
                        </svg>
                        <div class="absolute leading-none start-2/4 top-2/4 -translate-y-2/4 -translate-x-2/4">
                            <i class="ki-filled ki-messages text-xl ps-px text-green-500"></i>
                        </div>
                    </div>
                    <div class="flex flex-col">
                        <a class="hover:text-primary text-md font-medium text-mono" href="#">24/7 Support</a>
                        <span class="text-xs font-normal text-secondary-foreground">Help anytime, anywhere</span>
                    </div>
                </div>
            </div>
            <div class="kt-card">
                <div class="kt-card-content flex items-center gap-3.5 px-5 py-4">
                    <div class="relative size-[50px] shrink-0">
                        <svg class="w-full h-full stroke-info-transparent fill-info-soft" fill="none" height="48"
                             viewBox="0 0 44 48" width="44" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 2.4641C19.7128 0.320509 24.2872 0.320508 28 2.4641L37.6506 8.0359C41.3634 10.1795 43.6506 14.141 43.6506 18.4282V29.5718C43.6506 33.859 41.3634 37.8205 37.6506 39.9641L28 45.5359C24.2872 47.6795 19.7128 47.6795 16 45.5359L6.34937 39.9641C2.63655 37.8205 0.349365 33.859 0.349365 29.5718V18.4282C0.349365 14.141 2.63655 10.1795 6.34937 8.0359L16 2.4641Z"
                                  fill=""></path>
                            <path d="M16.25 2.89711C19.8081 0.842838 24.1919 0.842837 27.75 2.89711L37.4006 8.46891C40.9587 10.5232 43.1506 14.3196 43.1506 18.4282V29.5718C43.1506 33.6804 40.9587 37.4768 37.4006 39.5311L27.75 45.1029C24.1919 47.1572 19.8081 47.1572 16.25 45.1029L6.59937 39.5311C3.04125 37.4768 0.849365 33.6803 0.849365 29.5718V18.4282C0.849365 14.3196 3.04125 10.5232 6.59937 8.46891L16.25 2.89711Z"
                                  stroke=""></path>
                        </svg>
                        <div class="absolute leading-none start-2/4 top-2/4 -translate-y-2/4 -translate-x-2/4">
                            <i class="ki-filled ki-discount text-xl ps-px text-violet-500"></i>
                        </div>
                    </div>
                    <div class="flex flex-col">
                        <a class="hover:text-primary text-md font-medium text-mono" href="#">Discounts</a>
                        <span class="text-xs font-normal text-secondary-foreground">Save big on top deals</span>
                    </div>
                </div>
            </div>
            <div class="kt-card">
                <div class="kt-card-content flex items-center gap-3.5 px-5 py-4">
                    <div class="relative size-[50px] shrink-0">
                        <svg class="w-full h-full stroke-yellow-100 fill-warning-soft" fill="none" height="48"
                             viewBox="0 0 44 48" width="44" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 2.4641C19.7128 0.320509 24.2872 0.320508 28 2.4641L37.6506 8.0359C41.3634 10.1795 43.6506 14.141 43.6506 18.4282V29.5718C43.6506 33.859 41.3634 37.8205 37.6506 39.9641L28 45.5359C24.2872 47.6795 19.7128 47.6795 16 45.5359L6.34937 39.9641C2.63655 37.8205 0.349365 33.859 0.349365 29.5718V18.4282C0.349365 14.141 2.63655 10.1795 6.34937 8.0359L16 2.4641Z"
                                  fill=""></path>
                            <path d="M16.25 2.89711C19.8081 0.842838 24.1919 0.842837 27.75 2.89711L37.4006 8.46891C40.9587 10.5232 43.1506 14.3196 43.1506 18.4282V29.5718C43.1506 33.6804 40.9587 37.4768 37.4006 39.5311L27.75 45.1029C24.1919 47.1572 19.8081 47.1572 16.25 45.1029L6.59937 39.5311C3.04125 37.4768 0.849365 33.6803 0.849365 29.5718V18.4282C0.849365 14.3196 3.04125 10.5232 6.59937 8.46891L16.25 2.89711Z"
                                  stroke=""></path>
                        </svg>
                        <div class="absolute leading-none start-2/4 top-2/4 -translate-y-2/4 -translate-jx-2/4">
                            <i class="ki-filled ki-credit-cart text-xl ps-px text-yellow-500"></i>
                        </div>
                    </div>
                    <div class="flex flex-col">
                        <a class="hover:text-primary text-md font-medium text-mono" href="#">Money-Back</a>
                        <span class="text-xs font-normal text-secondary-foreground">Full refund, no risk</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    {% endcomment %}

    
    <!-- Event Registration Modal -->
    <div id="eventRegistrationModal" class="kt-modal hidden fixed inset-0 z-[9999] flex items-center justify-center bg-black/30 backdrop-blur-sm" data-kt-modal="true" role="dialog" aria-labelledby="eventRegistrationModalTitle" aria-modal="true">
        <div class="kt-card w-full max-w-[600px] rounded-xl border border-border bg-background shadow-2xl transition-transform duration-300 ease-in-out transform scale-95">
            <div class="kt-card-header px-5 py-4 flex items-center justify-between border-b border-gray-200 dark:border-gray-700">
                <h2 id="eventRegistrationModalTitle" class="text-xl font-bold text-mono">Event Registration</h2>
                <button class="kt-btn kt-btn-sm kt-btn-icon kt-btn-ghost shrink-0" onclick="closeEventRegistrationModal()" aria-label="Close modal">
                    <i class="ki-filled ki-cross text-base text-gray-500 hover:text-red-500"></i>
                </button>
            </div>
            <form method="POST" action="{% url 'dashboard:event_registration' %}" id="eventRegistrationForm">
                {% csrf_token %}
                <div class="kt-card-content flex flex-col space-y-4 p-5">
                    <input type="hidden" name="product_id" id="eventProductId">
                    <div>
                        <label for="eventName" class="block text-sm font-medium text-gray-650 dark:text-gray-300 mb-1">Event</label>
                        <input type="text" id="eventName" class="w-full border border-gray-300 dark:border-gray-600 rounded-md p-2.5 bg-gray-100 dark:bg-gray-800 text-gray-650 dark:text-gray-300 cursor-not-allowed" disabled>
                    </div>
                    <div>
                        <label for="fullName" class="block text-sm font-medium text-gray-650 dark:text-gray-300 mb-1">Full Name <span class="text-red-500">*</span></label>
                        <input type="text" name="full_name" id="fullName" class="w-full border border-gray-300 dark:border-gray-600 rounded-md p-2.5 focus:ring-2 focus:ring-primary focus:border-primary transition-colors" required aria-required="true">
                        <p class="text-xs text-red-500 mt-1 hidden" id="fullNameError">Full name is required.</p>
                    </div>
                    <div>
                        <label for="email" class="block text-sm font-medium text-gray-650 dark:text-gray-300 mb-1">Email <span class="text-red-500">*</span></label>
                        <input type="email" name="email" id="email" class="w-full border border-gray-300 dark:border-gray-600 rounded-md p-2.5 focus:ring-2 focus:ring-primary focus:border-primary transition-colors" required aria-required="true">
                        <p class="text-xs text-red-500 mt-1 hidden" id="emailError">Valid email is required.</p>
                    </div>
                    <div>
                        <label for="eventMessage" class="block text-sm font-medium text-gray-650 dark:text-gray-300 mb-1">Additional Notes</label>
                        <textarea name="message" id="eventMessage" class="w-full border border-gray-300 dark:border-gray-600 rounded-md p-2.5 focus:ring-2 focus:ring-primary focus:border-primary transition-colors" rows="4" placeholder="Add any additional details..."></textarea>
                    </div>
                </div>
                <div class="kt-card-footer px-5 py-4 flex justify-end gap-3 border-t border-gray-200 dark:border-gray-700">
                    <button type="button" class="kt-btn kt-btn-outline kt-btn-xs text-gray-650 hover:bg-gray-900 dark:hover:bg-gray-700" onclick="closeEventRegistrationModal()">
                        <i class="ki-filled ki-cross"></i>Cancel
                    </button>
                    <button type="submit" class="kt-btn kt-btn-xs bg-blue-600 text-white hover:bg-blue-700 transition-colors flex items-center" id="eventRegistrationSubmitBtn">
                        <i class="ki-filled ki-check-circle"></i>Register
                        <span class="loader"></span>
                    </button>
                </div>
            </form>
        </div>
    </div>

   
</div>
</div>
<!-- JavaScript -->
<script>
    // CSRF Token Helper
    function getCookie(name) {
        let cookieValue = null;
        if (document.cookie && document.cookie !== '') {
            const cookies = document.cookie.split(';');
            for (let i = 0; i < cookies.length; i++) {
                const cookie = cookies[i].trim();
                if (cookie.substring(0, name.length + 1) === (name + '=')) {
                    cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                    break;
                }
            }
        }
        return cookieValue;
    }
    const csrftoken = getCookie('csrftoken');
    // Slider JavaScript
    let currentSlide = 0;
    const slider = document.getElementById('slider');
    const totalSlides = slider ? slider.children.length : 0;

    const dots = document.querySelectorAll('.kt-dot');

    function updateDots(index) {
        dots.forEach(dot => dot.classList.remove('active'));
        if (dots[index]) dots[index].classList.add('active');
}

    function showSlide(index) {
        if (!slider || totalSlides === 0) return;
        currentSlide = (index + totalSlides) % totalSlides;
        slider.style.transform = `translateX(-${currentSlide * 100}%)`;
        updateDots(currentSlide);
    }
    updateDots(0);

    function nextSlide() {
        showSlide(currentSlide + 1);
    }

    function prevSlide() {
        showSlide(currentSlide - 1);
    }

    let sliderInterval = null;

    if (slider && !sliderInterval) {
        sliderInterval = setInterval(nextSlide, 5000);
    }

    // Event Registration Modal Handlers
    document.querySelectorAll('.open-event-registration-modal').forEach(button => {
        button.addEventListener('click', function (e) {
            e.preventDefault();
            const productId = button.getAttribute('data-product-id');
            const eventName = button.getAttribute('data-event-name');

            document.getElementById('eventProductId').value = productId;
            document.getElementById('eventName').value = eventName;

            const modal = document.getElementById('eventRegistrationModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden';
        });
    });
    //loader
    document.getElementById('rfqSubmitBtn').addEventListener('click', function(e) {
    const btn = e.currentTarget;
    const loader = btn.querySelector('.loader');

    // Show loader
    loader.style.display = 'inline-block';


});


    // Event Registration Modal
    function closeEventRegistrationModal() {
        const modal = document.getElementById('eventRegistrationModal');
        modal.classList.add('hidden');
        modal.classList.remove('flex');
        document.body.style.overflow = '';
    }

    document.querySelectorAll('.open-event-registration-modal').forEach(button => {
        button.addEventListener('click', function (e) {
            e.preventDefault();
            const productId = button.getAttribute('data-product-id');
            const eventName = button.getAttribute('data-event-name');

            document.getElementById('eventProductId').value = productId;
            document.getElementById('eventName').value = eventName;

            const modal = document.getElementById('eventRegistrationModal');
            modal.classList.remove('hidden');
            modal.classList.add('flex');
            document.body.style.overflow = 'hidden';
        });
    });

    document.addEventListener('DOMContentLoaded', function () {
        document.querySelectorAll('.show-login-modal').forEach(button => {
            button.addEventListener('click', openLoginModal);
        });
    });
    //loader
    document.getElementById('eventRegistrationSubmitBtn').addEventListener('click', function(e) {
    const btn = e.currentTarget;
    const loader = btn.querySelector('.loader');

    // Show loader
    loader.style.display = 'inline-block';

});

</script>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll(".tab-button");
        const contents = document.querySelectorAll(".tab-content");
        const viewAll = document.getElementById("view-all");

        tabs.forEach(tab => {
            tab.addEventListener("click", () => {
                // Update active tab
                tabs.forEach(t => t.classList.remove("active"));
                tab.classList.add("active");

                // Show/hide content
                const tabId = tab.getAttribute("data-tab");
                contents.forEach(content => {
                    content.classList.toggle("hidden", content.id !== tabId);
                });

                // Show/hide View All button
                viewAll.classList.toggle("hidden", tabId !== "suppliers");
            });
        });
    });
</script>

<script>
    let allScrollPaused = false;
    const pauseButton = document.getElementById('pauseAllScroll');
    
    function toggleAllScroll() {
        allScrollPaused = !allScrollPaused;
        
        const leftScrolls = document.querySelectorAll('.scroll-content-left');
        const centerScrolls = document.querySelectorAll('.scroll-content-center');
        const rightScrolls = document.querySelectorAll('.scroll-content-right');
        
        const allScrolls = [...leftScrolls, ...centerScrolls, ...rightScrolls];
        
        if (allScrollPaused) {
            allScrolls.forEach(scroll => {
                scroll.classList.add('scroll-paused');
            });
            pauseButton.textContent = '▶️';
        } else {
            allScrolls.forEach(scroll => {
                scroll.classList.remove('scroll-paused');
            });
            pauseButton.textContent = '⏸️';
        }
    }
    
    // Initialize on page load
    document.addEventListener('DOMContentLoaded', function() {
        // Add more testimonials for longer scroll
        const columns = document.querySelectorAll('.scroll-column');
        
        columns.forEach(column => {
            const content = column.querySelector('.scroll-content-left, .scroll-content-center, .scroll-content-right');
            if (content) {
                const originalContent = content.innerHTML;
                content.innerHTML += originalContent + originalContent;
            }
        });
        
        // Adjust animation duration based on content height
        const scrollContents = document.querySelectorAll('[class*="scroll-content"]');
        scrollContents.forEach(content => {
            const totalHeight = content.scrollHeight;
            const duration = (totalHeight / 30) * 1000; // Adjust speed
            content.style.animationDuration = `${duration}ms`;
        });
    });

let currentOpenDropdown = null;
let lastCategoryPopupOpen = false;

function toggleMegaMenu(index, event) {
    event.stopPropagation();
    
    // Close second popup if open
    if (lastCategoryPopupOpen) {
        closeSecondPopup();
    }
    
    const dropdown = document.getElementById(`mega-dropdown-${index}`);
    const overlay = document.getElementById('dropdown-overlay');
    const categoryName = document.getElementById(`cat-name-${index}`);
    const categoryItem = document.getElementById(`category-${index}`);
    
    // Close all dropdowns first
    if (currentOpenDropdown !== null && currentOpenDropdown !== index) {
        closeAllDropdowns();
    }
    
    // Toggle current dropdown
    if (dropdown.classList.contains('active')) {
        closeAllDropdowns();
    } else {
        // Position dropdown below category item
        const categoryRect = categoryItem.getBoundingClientRect();
        const containerRect = categoryItem.closest('.category-main-container').getBoundingClientRect();
        
        // Calculate position
        dropdown.style.top = (containerRect.bottom + window.scrollY + 8) + 'px';
        dropdown.style.left = (categoryRect.left + window.scrollX) + 'px';
        
        dropdown.classList.add('active');
        overlay.classList.add('active');
        categoryName.classList.add('active');
        currentOpenDropdown = index;
    }
}

function toggleSecondPopup(event) {
    event.stopPropagation();
    
    // Close mega dropdowns if open
    if (currentOpenDropdown !== null) {
        closeAllDropdowns();
    }
    
    const popup = document.getElementById('second-popup');
    const overlay = document.getElementById('dropdown-overlay');
    const categoryName = document.getElementById('last-cat-name');
    
    if (popup.classList.contains('active')) {
        closeSecondPopup();
    } else {
        // Position popup differently (centered or full-width)
        const categoryItem = document.getElementById('last-category');
        const categoryRect = categoryItem.getBoundingClientRect();
        const containerRect = categoryItem.closest('.category-main-container').getBoundingClientRect();
        
        // Position at bottom of container
        popup.style.top = (containerRect.bottom + window.scrollY + 8) + 'px';
        popup.style.left = '50%';
        popup.style.transform = 'translateX(-50%)';
        popup.style.width = '90%';
        popup.style.maxWidth = '1200px';
        
        popup.classList.add('active');
        overlay.classList.add('active');
        categoryName.classList.add('active');
        lastCategoryPopupOpen = true;
    }
}

function closeSecondPopup() {
    const popup = document.getElementById('second-popup');
    const overlay = document.getElementById('dropdown-overlay');
    const categoryName = document.getElementById('last-cat-name');
    
    popup.classList.remove('active');
    overlay.classList.remove('active');
    categoryName.classList.remove('active');
    lastCategoryPopupOpen = false;
}

function showSubcategories(subcatId, categoryIndex) {
    // Remove active class from all sidebar items
    document.querySelectorAll(`#mega-dropdown-${categoryIndex} .dropdown-sidebar-item`).forEach(item => {
        item.classList.remove('active');
    });
    
    // Add active class to clicked item
    const clickedItem = document.querySelector(`#mega-dropdown-${categoryIndex} .dropdown-sidebar-item[data-subcat="${subcatId}"]`);
    if (clickedItem) {
        clickedItem.classList.add('active');
    }
    
    // Update right panel header
    const subcatName = clickedItem ? clickedItem.textContent.trim().replace('→', '') : 'All';
    document.getElementById(`panel-header-${categoryIndex}`).textContent = 
        subcatId === 'all' ? `More in ${document.getElementById(`cat-name-${categoryIndex}`).textContent}` : subcatName;
    
    // Here you could make an AJAX call to load specific last categories for this subcategory
    // For now, we'll just show all
}

function closeAllDropdowns() {
    document.querySelectorAll('.mega-dropdown').forEach(dd => {
        dd.classList.remove('active');
    });
    document.querySelectorAll('.category-name').forEach(name => {
        name.classList.remove('active');
    });
    document.getElementById('dropdown-overlay').classList.remove('active');
    currentOpenDropdown = null;
}

// Close on click outside
document.addEventListener('click', function(event) {
    if (!event.target.closest('.category-item') && 
        !event.target.closest('.mega-dropdown') && 
        !event.target.closest('.second-popup')) {
        closeAllDropdowns();
        closeSecondPopup();
    }
});

// Close on scroll
window.addEventListener('scroll', function() {
    if (currentOpenDropdown !== null || lastCategoryPopupOpen) {
        closeAllDropdowns();
        closeSecondPopup();
    }

});

</script>

{% endblock %}